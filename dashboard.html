<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸš‰ GD-AUROAPERO Dashboard</title>
  <style>
    body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
    section { margin-bottom: 30px; }
    pre { background: #111; padding: 10px; border-radius: 8px; max-height: 200px; overflow:auto; }
    h1 { color: #0ff; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>ĞŸšˆ GD-AURORAPERO Dashboard</h1>

  <section>
    <h2>ğŸœ´ Derniers Heartbeats</h2>
    <pre id="heartbeats">Chargement...</pre>
  </section>

  <section>
    <h2>ğŸš EtÃ©t Global</h2>
    <pre id="states">Chargement...</pre>
  </section>

  <section>
    <h2>ğŸ£ Flux Symbolique</h2>
    <canvas id="graph" width="600" height="300"></canvas>
  </section>

  <script>
    async function fetchFile(url) {
      const res = await fetch(url);
      return res.ok ? await res.text() : "â¤ Erreur de chargement";
    }

    async function loadData() {
      const hb = await fetchFile("https://raw.githubusercontent.com/WM-AI-TECHOI-CA/GD-A/master/states/memory_index.md");
      document.getElementById("heartbeats").textContent = hb.split("\n").slice(0,10).join("\n");

      const st = await fetchFile("https://raw.githubusercontent.com/WM-AI-TECH-IA/GD-A/master/states/last_query.log");
      document.getElementById("states").textContent = st.split("\n").slice(0,20).join("\n");

      const values = st.split("\n").map(s => s.length).slice(0,20);
      new Chart(document.getElementById("graph"), {
        type: "line",
        data: {
          labels: values.map((_,i)=>i+1),
          datasets: [{
            label: "Flux symbolique",
            data: values,
            borderColor: "#0ff",
            backgroundColor: "rgba(0,255,255,0.2)"
          }]
        },
        options: {
          responsive: false,
          plugins: { legend: { labels: { color: "#0f0" } } },
          scales: {
            x: { ticks: { color: "#0f0" }, grid: { color: "#333" } },
            y: { ticks: { color: "#0f0" }, grid: { color: "#333" } } }
        }
      });
    }
    loadData();
  </script>
</body>
</html>